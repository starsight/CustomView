本项目实现自定义View部分来自自己实现，部分来自网上开源。

---
### 实现思路

#### 心形动画

主要包括两部分，点赞动画和取消动画。对于点赞动画主要就是心形慢慢放大填满整个轮廓；对于取消动画主要分三个步骤：1）心中间出现裂缝。2）心破碎时，两瓣心向左右分别旋转。3）两瓣心化成圆形下落并淡化。

从整体上把握，点击心形后触发动画，这边是属性动画，采用直接创建一个ValueAnimator并设置UpdateListener监听动画过程，根据动画进度值改变参数并触发重绘，完成绘制。当然通过对属性提供set、get并按照属性动画最基本一套也是可以完成的。即刻的点赞实现就是基于后者。

心形的轮廓线每次绘制即可，不需要多改变，直接使用path.cubicTo等组合绘制，paint设置成不填充。

点赞时，只需根据onAnimationUpdate中改变的参数绘制，paint设置成填充模式，这里注意下同参数下似乎贝塞尔曲线填充模式覆盖不了不填充，所以绘制曲线稍微做了些修改。
取消点赞时把三段动画根据完成度分为三段执行，先绘制出中间裂开效果，中间裂开也是根据属性值大小依次绘制，从而展现出心从上开始向下裂出的效果。第二段分别绘制左边右边半个心，然后依照一点向外旋转。第三段也很简单了，画两个圆下落。
这里只展现大致思路，对于属性值改变，心形绘制范围，触发点击等再次不做详细介绍了。

#### 即刻点赞
动画过程是典型的属性动画，通过改变mScale、mRadius和mNewOffsetY等完成动画。使用组合动画。
点赞动画触发的效果为：灰色手指图变小，计数增大效果；再红色手指图变大，圆圈散开；取赞的动效为：红色手指变大（缩小成0.9,再变化到1），计数减少效果；再变成灰色（不改变大小）。

```java
	AnimatorSet set = new AnimatorSet();
	// thumbUpScale 灰色图片微缩   textOffsetY 点赞个数增加一个效果
    set.play(thumbUpScale).with(textOffsetY);
	// notThumbUpScale 红色图片微微放大到原始尺寸，同时随着圆圈慢慢展开 thumbUpScale 圆圈散开变淡
    set.play(notThumbUpScale).after(thumbUpScale);
```

取消动画的组合也类似，不再细说。

右侧点赞个数的增加、减少，其动画的范围只限于改变的数字，如果没有进/退1，只改变1位，即影响最少的位数变化。这里把右侧数字分为两个部分，变化的位和不变化的位，变化的位再分成变化前和变化后；不变的位什么也不改变，变化前的位的y轴逐渐向上/向下偏移，变化后的位从下方/上方填补移出的空缺。

#### 薄荷直尺

直尺的主体分为两个部分，直尺和基准线，由于直尺要滑动所以需要单独做成一个View，自然地，也需要一个ViewGroup来包裹这两者。

先说ViewGroup，Measure阶段基本不需要做太大修改，Layout只需要把布局信息传递给子View，Draw中绘制背景线和基准线，为了防止遮盖，现在super.onDraw之后。

对于直尺，主要是绘制和滑动。绘制为了保证左右极限居中，对上下限做了屏幕宽度一半的修正，根据大格与小格绘制长短线。滑动即重写onTouchEvent，在ACTION_MOVE中scrollBy()，在scrollTo()中触发重绘（数据显示，限幅等），调用的重写computeScroll()。此外需要把滑动停止时的最小刻度线对齐基准线。滑动部分，抬手之后如果速度大于阈值，则使用scroller.fling，然后重绘触发computeScroll()。

由于项目使用ViewPager，而薄荷尺也是横移，所以还需要做一个滑动处理。这里使用内部拦截法完成，在ACTION_MOVE时，使用requestDisallowInterceptTouchEvent(true);让父类不拦截，如果子类发现已经滑到直尺左右极限则把事件交还给父类。

#### Flipboard旋转动画